<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>project-dsi</title><meta name="description" content="Documentation for project-dsi"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">project-dsi</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> project-dsi </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-12-api-nodeexpress-de-gestión-de-información-musical" id="práctica-12-api-nodeexpress-de-gestión-de-información-musical" style="color: inherit; text-decoration: none;">
  <h1>Práctica 12: API Node/Express de gestión de información musical</h1>
</a>
<p>En esta práctica se va a desarrollar una APIRest haciendo uso de NodeJS y Express que va a permitir operaciones de lectura, modificación, creado y borrado de artistas, canciones y playlists en una base de datos implementada con MongoBD y desplegada mediante Heroku.</p>
<p>A continuación vamos a mostrar como hemos modelado cada uno de los tres elementos que acepta nuesta API</p>

<a href="#modelado-canción" id="modelado-canción" style="color: inherit; text-decoration: none;">
  <h2>Modelado Canción</h2>
</a>
<p>Hemos creado una interfaz llamada <em>&#39;SongDocumentInterface&#39;</em> que extiende a la clase <em>Document</em> del módulo mongoose donde hemos definido los atributos necesarios para modelar una canción</p>
<pre><code class="language-c"><span class="hl-0">interface SongDocumentInterface extends Document {</span><br/><span class="hl-0">    title: string,</span><br/><span class="hl-0">    artist: string,</span><br/><span class="hl-0">    seconds: number,</span><br/><span class="hl-0">    minutes: number,</span><br/><span class="hl-0">    isSingle: boolean,</span><br/><span class="hl-0">    timesListened: number</span><br/><span class="hl-0">}</span>
</code></pre>
<p>A continuación creamos un esquema con el cual definiremos las caracteristicas de cada uno de los atributos de la canción mediante la clase <em>Schema</em> proporcionada por mongoose. Ahora mostraremos las carácteristicas que debe cumplir cada uno de los atributos.</p>
<ul>
<li><p><strong>title</strong>: Representa el título de la canción. Se ha definido de tipo string, debe ser único en la base de datos, es un atributo obligatorio y se eliminarán los espacios que tenga por delante o detrás para reducir su tamaño. Mediante el módulo validate, se comprueba que el título de la canción debe empezar por mayúscula, en caso contrario se captura y devuelve un error. </p>
<pre><code class="language-c"><span class="hl-0">title: {</span><br/><span class="hl-0">  type: String,</span><br/><span class="hl-0">  unique: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  trim: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: string) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (!</span><span class="hl-3">value</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(/^[A-Z]/)) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;Song title must start with a capital letter&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>artist</strong>: Nombre del artista o grupo creador de la canción. Ha sido definido de tipo string, es obligatorio y también se eliminan los espacios anteriores y posteriores. En este caso no debe ser único ya que se deben poder almacenar varias canciones de un mismo artista.</p>
<pre><code class="language-c"><span class="hl-0">artist: {</span><br/><span class="hl-0">  type: String,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  trim: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: string) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (!</span><span class="hl-3">value</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(/^[A-Z]/)) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;Song title must start with a capital letter&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>seconds</strong>: Duración en segundos de la cancion. Ha sido declarado de tipo number, es un atributo obligatorio y mediante el módulo validate, se comprueba que sea mayor que 0 ya que no tendría sentido una canción con menor duración que 0 segundos</p>
<pre><code class="language-c"><span class="hl-0">seconds: {</span><br/><span class="hl-0">  type: Number,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: number) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (value &lt;= </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;A song must last more than 0 seconds&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>minutes</strong>: Duración de la canción en minutos.  Ha sido declarado de tipo number, es un atributo obligatorio y mediante el módulo validate, se comprueba que sea mayor que 0 ya que no tendría sentido una canción con menor duración que 0 minutos</p>
<pre><code class="language-c"><span class="hl-0">minutes: {</span><br/><span class="hl-0">  type: Number,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: number) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (value &lt;= </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;A song must last more than 0 minutes&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      } </span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>isSingle</strong>: Indica si la canción es un single o por lo contario pertenece a un album. Ha sido declarado de tipo booleano y es un atributo también obligatorio</p>
<pre><code class="language-c"><span class="hl-0">isSingle: {</span><br/><span class="hl-0">  type: </span><span class="hl-7">Boolean</span><span class="hl-0">,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>timesListened</strong>: Número de veces que ha sido escuchada una canción. Ha sido declarado de tipo number, es un atributo obligatorio y mediante el módulo validate, se comprueba que sea mayor que 0 ya que no tendría sentido una canción con menos de 0 veces escuchada</p>
<pre><code class="language-c"><span class="hl-0">timesListened: {</span><br/><span class="hl-0">  type: Number,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: number) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (value &lt; </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;A song must have 0 or more plays&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
</ul>

<a href="#modelado-artist" id="modelado-artist" style="color: inherit; text-decoration: none;">
  <h2>Modelado Artist</h2>
</a>
<p>Hemos creado una interfaz llamada <em>&#39;ArtistDocumentInterface&#39;</em> que extiende a la clase <em>Document</em> del módulo mongoose donde hemos definido los atributos necesarios para modelar un artista</p>
<pre><code class="language-c"><span class="hl-0">interface ArtistDocumentInterface extends Document {</span><br/><span class="hl-0">    name: string,</span><br/><span class="hl-0">    genres: string</span><span class="hl-1">[]</span><span class="hl-0">,</span><br/><span class="hl-0">    songs: string</span><span class="hl-1">[]</span><span class="hl-0">,</span><br/><span class="hl-0">    numberListeners: number,</span><br/><span class="hl-0">}</span>
</code></pre>
<p>A continuación creamos un esquema con el cual definiremos las caracteristicas de cada uno de los atributos del artista mediante la clase <em>Schema</em> proporcionada por mongoose. Ahora mostraremos las carácteristicas que debe cumplir cada uno de los atributos.</p>
<ul>
<li><strong>name</strong>: Nombre del artista. Se ha definido de tipo string, debe ser único en la base de datos, es un atributo obligatorio y se eliminarán los espacios que tenga por delante o detrás para reducir su tamaño. Mediante el módulo validate, se comprueba que el nombre del artista debe empezar por mayúscula, en caso contrario se captura y devuelve un error.</li>
</ul>
<pre><code class="language-c"><span class="hl-0">name: {</span><br/><span class="hl-0">    type: String,</span><br/><span class="hl-0">    unique: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    trim: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    validate: (value: string) =&gt; {</span><br/><span class="hl-0">        </span><span class="hl-2">if</span><span class="hl-0"> (!</span><span class="hl-3">value</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(/^[A-Z]/)) {</span><br/><span class="hl-0">            throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;Song title must start with a capital letter&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">},</span>
</code></pre>
<ul>
<li><p><strong>genres</strong>: Contiene los géneros relacionados con el artista. Declarado de tipo array de strings y es un atributo obligatorio en la base de datos</p>
<pre><code class="language-c"><span class="hl-0">genres: {</span><br/><span class="hl-0">  type: [String],</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>songs</strong>: Contiene las canciones lanzadas por el artista. Declarado de tipo array de strings y es un atributo obligatorio en la base de datos</p>
</li>
</ul>
<pre><code class="language-c"><span class="hl-0">songs: {</span><br/><span class="hl-0">    type: [String],</span><br/><span class="hl-0">    required: </span><span class="hl-1">true</span><br/><span class="hl-0">}, </span>
</code></pre>
<ul>
<li><strong>numberListeners</strong>: Número de oyentes del artista. Declarado de tipo number, es un atributo obligatorio y mediante el módulo validate se comprueba que sea mayor o igual a 0 ya que no tiene sentido un número negativo de oyentes</li>
</ul>
<pre><code class="language-c"><span class="hl-0">numberListeners: {</span><br/><span class="hl-0">    type: Number,</span><br/><span class="hl-0">    required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    validate: (value: number) =&gt; {</span><br/><span class="hl-0">        </span><span class="hl-2">if</span><span class="hl-0"> (value &lt;= </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">            throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;An artists must have 0 listeners or more&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">},</span>
</code></pre>

<a href="#modelado-playlist" id="modelado-playlist" style="color: inherit; text-decoration: none;">
  <h2>Modelado Playlist</h2>
</a>
<p>Hemos creado una interfaz llamada <em>&#39;PlaylistDocumentInterface&#39;</em> que extiende a la clase <em>Document</em> del módulo mongoose donde hemos definido los atributos necesarios para modelar una playlist</p>
<pre><code class="language-c"><span class="hl-0">interface PlaylistDocumentInterface extends Document {</span><br/><span class="hl-0">    name: string,</span><br/><span class="hl-0">    numberSongs: number,</span><br/><span class="hl-0">    hours: number,</span><br/><span class="hl-0">    minutes: number,</span><br/><span class="hl-0">    genres: string</span><span class="hl-1">[]</span><br/><span class="hl-0">}</span>
</code></pre>
<p>A continuación creaamos un esquema con el cual definiremos las caracteristicas de cada uno de los atributos de la playlist mediante la clase <em>Schema</em> proporcionada por mongoose. Ahora mostraremos las carácteristicas que debe cumplir cada uno de los atributos.</p>
<ul>
<li><strong>name</strong>: Nombre de la playlist. Se ha definido de tipo string, debe ser único en la base de datos, es un atributo obligatorio y se eliminarán los espacios que tenga por delante o detrás para reducir su tamaño. Mediante el módulo validate, se comprueba que el nombre del artista debe empezar por mayúscula, en caso contrario se captura y devuelve un error.</li>
</ul>
<pre><code class="language-c"><span class="hl-0">name: {</span><br/><span class="hl-0">    type: String,</span><br/><span class="hl-0">    unique: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    trim: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    validate: (value: string) =&gt; {</span><br/><span class="hl-0">        </span><span class="hl-2">if</span><span class="hl-0"> (!</span><span class="hl-3">value</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(/^[A-Z]/)) {</span><br/><span class="hl-0">            throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;Song title must start with a capital letter&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">},</span>
</code></pre>
<ul>
<li><strong>numberSongs</strong>: Número de canciones de la playlist. Declarado de tipo number, es un atributo obligatorio y mediante el módulo validate comprobamos que sea igual o mayor 0 ya que no tiene sentido que una playlist tenga un número negativo de canciones</li>
</ul>
<pre><code class="language-c"><span class="hl-0">numberSongs: {</span><br/><span class="hl-0">    type: Number,</span><br/><span class="hl-0">    required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    validate: (value: number) =&gt; {</span><br/><span class="hl-0">        </span><span class="hl-2">if</span><span class="hl-0"> (value &lt;= </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">            throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;A playlist must have more than 0 songs&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">},</span>
</code></pre>
<ul>
<li><p><strong>minutes</strong>: Duración de la playlist en minutos. Ha sido declarado de tipo number, es un atributo obligatorio y mediante el módulo validate, se comprueba que sea mayor que 0 ya que no tendría sentido una playlist con menor duración que 0 minutos</p>
<pre><code class="language-c"><span class="hl-0">minutes: {</span><br/><span class="hl-0">  type: Number,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: number) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (value &lt;= </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;A playlist must last more than 0 minutes&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      } </span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>hours</strong>: Duración de la playlist en horas. Ha sido declarado de tipo number, es un atributo obligatorio y mediante el módulo validate, se comprueba que sea mayor que 0 ya que no tendría sentido una playlist con menor duración que 0 horas</p>
<pre><code class="language-c"><span class="hl-0">hours: {</span><br/><span class="hl-0">  type: Number,</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">  validate: (value: number) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (value &lt;= </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">          throw new </span><span class="hl-4">Error</span><span class="hl-0">(</span><span class="hl-5">&#39;A playlist must last more than 0 hours&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      } </span><br/><span class="hl-0">  },</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
<li><p><strong>genres</strong>: Contiene los géneros relacionados con la playlist. Declarado de tipo array de strings y es un atributo obligatorio en la base de datos</p>
<pre><code class="language-c"><span class="hl-0">genres: {</span><br/><span class="hl-0">  type: [String],</span><br/><span class="hl-0">  required: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">},</span>
</code></pre>
</li>
</ul>

<a href="#funciones-de-la-base-de-datos" id="funciones-de-la-base-de-datos" style="color: inherit; text-decoration: none;">
  <h2>Funciones de la base de datos</h2>
</a>
<p>Del mismo modo, vamos a mostrar las funciones encargadas de realizar las operaciones de lectura, modificación, creado y borrado de artistas, canciones y playlists. Estas funcinones se encuentran en la carpeta <code>routers</code> dentro del directorio <code>src</code>.</p>

<a href="#funcion-de-creacion" id="funcion-de-creacion" style="color: inherit; text-decoration: none;">
  <h3>Funcion de creacion</h3>
</a>
<pre><code class="language-c"><span class="hl-0">export </span><span class="hl-1">const</span><span class="hl-0"> postRouter = express.</span><span class="hl-4">Router</span><span class="hl-0">();</span><br/><br/><span class="hl-0">postRouter.</span><span class="hl-4">post</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-1">const</span><span class="hl-0"> song = new </span><span class="hl-4">Song</span><span class="hl-0">(</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">body</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-3">song</span><span class="hl-0">.</span><span class="hl-4">save</span><span class="hl-0">().</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">201</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">  }).</span><span class="hl-4">catch</span><span class="hl-0">((error) =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">(error);</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">});</span>
</code></pre>
<p>En la primera linea se invoca el metodo <code>express.Router()</code>, que retornara un objeto Router, que nos permitirá definir rutas. </p>
<p>Como se puede observar en el codigo, se invoca el metodo post, que se encarga de crear el objeto que le pasemos a la base de datos. En este caso, esta orientado a las canciones, pero realizando cambios en las rutas y en el objeto creado que se guarda, se puede obtener la funcion de creacion de artistas y de playlist. </p>
<p>En caso de que se haya creado correctamente, se envia el estado 201, y si por el contrario, no se ha podido crear, se envia un estado 400.</p>

<a href="#funcion-de-lectura" id="funcion-de-lectura" style="color: inherit; text-decoration: none;">
  <h3>Funcion de lectura</h3>
</a>
<p>La operacion de lectura puede realizarse buscando un elemento a partir de su titulo o nombre, o a partir de su identificador. </p>
<pre><code class="language-c"><span class="hl-0">export </span><span class="hl-1">const</span><span class="hl-0"> getRouter = express.</span><span class="hl-4">Router</span><span class="hl-0">();</span><br/><br/><span class="hl-0">getRouter.</span><span class="hl-4">get</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-1">const</span><span class="hl-0"> filter = </span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">query</span><span class="hl-0">.</span><span class="hl-3">title</span><span class="hl-0">?{title: </span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">query</span><span class="hl-0">.</span><span class="hl-3">title</span><span class="hl-0">.</span><span class="hl-4">toString</span><span class="hl-0">()}:{};</span><br/><br/><span class="hl-0">  </span><span class="hl-3">Song</span><span class="hl-0">.</span><span class="hl-4">find</span><span class="hl-0">(filter).</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-2">if</span><span class="hl-0"> (</span><span class="hl-3">song</span><span class="hl-0">.</span><span class="hl-3">length</span><span class="hl-0"> !== </span><span class="hl-6">0</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">    } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">404</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  }).</span><span class="hl-4">catch</span><span class="hl-0">(() =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">500</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">});</span>
</code></pre>
<p>Para llevar a cabo la operacion de lectura se invoca el metodo get sobre el objeto de tipo Router. Para llevar a cabo la busqueda a partir de su titulo o nombre, se utiliza la funcion find, pasando por parametros el filtro, que es el titulo de nuestro objeto a buscar. </p>
<p>De la misma manera que en el metodo post, se puede obtener la funcion de creacion de artistas y de playlist si se realizan  cambios en las rutas y en el tipo de objeto sobre el que se realiza la busqueda.</p>
<p>En caso de que se haya no exista el objeto que se esta buscando en la base de datos, se envia el estado 404, pero si el resultado de la busqueda es un error, se enviara un estado 500.</p>
<pre><code class="language-c"><span class="hl-0">getRouter.</span><span class="hl-4">get</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs/:id&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-3">Song</span><span class="hl-0">.</span><span class="hl-4">findById</span><span class="hl-0">(</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">params</span><span class="hl-0">.</span><span class="hl-3">id</span><span class="hl-0">).</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-2">if</span><span class="hl-0"> (!song) {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">404</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">    } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  }).</span><span class="hl-4">catch</span><span class="hl-0">(() =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">500</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">});</span>
</code></pre>
<p>Con respecto a la operacion de busqueda por el identificador, la unica diferencia con respecto al otro tipo de busqueda es el uso de la funcion <code>findById</code>, que realiza una busqueda mediante la id. </p>

<a href="#funcion-de-modificacion" id="funcion-de-modificacion" style="color: inherit; text-decoration: none;">
  <h3>Funcion de modificacion</h3>
</a>
<p>La operacion de modificacion puede realizarse buscando un elemento a partir de su titulo o nombre, o a partir de su identificador. </p>
<pre><code class="language-c"><span class="hl-0">export </span><span class="hl-1">const</span><span class="hl-0"> patchRouter = express.</span><span class="hl-4">Router</span><span class="hl-0">();</span><br/><br/><span class="hl-0">patchRouter.</span><span class="hl-4">patch</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-2">if</span><span class="hl-0"> (!</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">query</span><span class="hl-0">.</span><span class="hl-3">title</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">({</span><br/><span class="hl-0">      error: </span><span class="hl-5">&#39;A title must be provided&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  });</span><br/><br/><span class="hl-0">  } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">const</span><span class="hl-0"> allowedUpdates = [</span><span class="hl-5">&#39;artist&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;seconds&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;minutes&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;isSingle&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;timesListened&#39;</span><span class="hl-0">];</span><br/><span class="hl-0">    </span><span class="hl-1">const</span><span class="hl-0"> actualUpdates = </span><span class="hl-3">Object</span><span class="hl-0">.</span><span class="hl-4">keys</span><span class="hl-0">(</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">body</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">const</span><span class="hl-0"> isValidUpdate =</span><br/><span class="hl-0">      </span><span class="hl-3">actualUpdates</span><span class="hl-0">.</span><span class="hl-4">every</span><span class="hl-0">((update) =&gt; </span><span class="hl-3">allowedUpdates</span><span class="hl-0">.</span><span class="hl-4">includes</span><span class="hl-0">(update));</span><br/><br/><span class="hl-0">    </span><span class="hl-2">if</span><span class="hl-0"> (!isValidUpdate) {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">({</span><br/><span class="hl-0">        error: </span><span class="hl-5">&#39;Update is not permitted&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">      });</span><br/><span class="hl-0">    } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-3">Song</span><span class="hl-0">.</span><span class="hl-4">findOneAndUpdate</span><span class="hl-0">({title: </span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">query</span><span class="hl-0">.</span><span class="hl-3">title</span><span class="hl-0">.</span><span class="hl-4">toString</span><span class="hl-0">()}, </span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">body</span><span class="hl-0">, {</span><br/><span class="hl-0">        new: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">        runValidators: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">      }).</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">        </span><span class="hl-2">if</span><span class="hl-0"> (!song) {</span><br/><span class="hl-0">          </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">404</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">        } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">          </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">      }).</span><span class="hl-4">catch</span><span class="hl-0">((error) =&gt; {</span><br/><span class="hl-0">        </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">(error);</span><br/><span class="hl-0">      });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code></pre>
<p>Para llevar a cabo la operacion de modificacion se invoca el metodo patch sobre el objeto de tipo Router. Para realizar la busqueda es necesario comprobar si la modificacion que se intenta realizar es valida, para ello, se comprueban los elementos que se pueden modificar y el elemento que se quiere modificar. Tras esto, se emplea la funcion <code>findOneAndUpdate</code>, que se encarga de modificar aquel objeto que concuerde con el que estamos buscando. </p>
<p>Se puede obtener la funcion de creacion de artistas y de playlist si se realizan  cambios en las rutas, en el tipo de objeto sobre el que se realiza la busqueda, y los atributos modificables.</p>
<p>En caso de que se haya no exista el objeto que se esta buscando en la base de datos, se envia el estado 404, pero si el resultado de la busqueda es un error, se enviara un estado 400.</p>
<pre><code class="language-c"><span class="hl-0">patchRouter.</span><span class="hl-4">patch</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs/:id&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-1">const</span><span class="hl-0"> allowedUpdates = [</span><span class="hl-5">&#39;artist&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;seconds&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;minutes&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;isSingle&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;timesListened&#39;</span><span class="hl-0">];</span><br/><span class="hl-0">  </span><span class="hl-1">const</span><span class="hl-0"> actualUpdates = </span><span class="hl-3">Object</span><span class="hl-0">.</span><span class="hl-4">keys</span><span class="hl-0">(</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">body</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">const</span><span class="hl-0"> isValidUpdate =</span><br/><span class="hl-0">      </span><span class="hl-3">actualUpdates</span><span class="hl-0">.</span><span class="hl-4">every</span><span class="hl-0">((update) =&gt; </span><span class="hl-3">allowedUpdates</span><span class="hl-0">.</span><span class="hl-4">includes</span><span class="hl-0">(update));</span><br/><br/><span class="hl-0">  </span><span class="hl-2">if</span><span class="hl-0"> (!isValidUpdate) {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">({</span><br/><span class="hl-0">      error: </span><span class="hl-5">&#39;Update is not permitted&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">  } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-3">Song</span><span class="hl-0">.</span><span class="hl-4">findByIdAndUpdate</span><span class="hl-0">(</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">params</span><span class="hl-0">.</span><span class="hl-3">id</span><span class="hl-0">, </span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">body</span><span class="hl-0">, {</span><br/><span class="hl-0">      new: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">      runValidators: </span><span class="hl-1">true</span><span class="hl-0">,</span><br/><span class="hl-0">    }).</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (!song) {</span><br/><span class="hl-0">        </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">404</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">      } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    }).</span><span class="hl-4">catch</span><span class="hl-0">((error) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">(error);</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code></pre>
<p>Para la modificacion mediante el identificador, se utiliza la funcion <code>findByIdAndUpdate</code>, pero sin contar con la comprobacion de los elementos necesarios apra la busqueda del objeto, las dos funciones se desarrollan igual.</p>

<a href="#funcion-de-eliminacion" id="funcion-de-eliminacion" style="color: inherit; text-decoration: none;">
  <h3>Funcion de eliminacion</h3>
</a>
<p>La operacion de eliminacion puede realizarse buscando un elemento a partir de su titulo o nombre, o a partir de su identificador. </p>
<pre><code class="language-c"><span class="hl-0">export </span><span class="hl-1">const</span><span class="hl-0"> deleteRouter = express.</span><span class="hl-4">Router</span><span class="hl-0">();</span><br/><br/><br/><span class="hl-0">deleteRouter.</span><span class="hl-4">delete</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-2">if</span><span class="hl-0"> (!</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">query</span><span class="hl-0">.</span><span class="hl-3">title</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">({</span><br/><span class="hl-0">      error: </span><span class="hl-5">&#39;A title must be provided&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">  } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-3">Song</span><span class="hl-0">.</span><span class="hl-4">findOneAndDelete</span><span class="hl-0">({title: </span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">query</span><span class="hl-0">.</span><span class="hl-3">title</span><span class="hl-0">.</span><span class="hl-4">toString</span><span class="hl-0">()}).</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-2">if</span><span class="hl-0"> (!song) {</span><br/><span class="hl-0">        </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">404</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">      } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    }).</span><span class="hl-4">catch</span><span class="hl-0">(() =&gt; {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code></pre>
<p>Para llevar a cabo la operacion de eliminacion se invoca el metodo delete sobre el objeto de tipo Router. Para realizar la busqueda del objeto a eliminar, se emplea la funcion <code>findOneAndDelete</code>, que se encarga de eliminar aquel objeto que concuerde con el que estamos buscando. </p>
<p>Se puede obtener la funcion de creacion de artistas y de playlist si se realizan  cambios en las rutas y en el tipo de objeto sobre el que se realiza la busquedas.</p>
<p>En caso de que se haya no exista el objeto que se esta buscando en la base de datos, se envia el estado 404, pero si el resultado de la busqueda es un error, se enviara un estado 400.</p>
<pre><code class="language-c"><span class="hl-0">deleteRouter.</span><span class="hl-4">delete</span><span class="hl-0">(</span><span class="hl-5">&#39;/songs/:id&#39;</span><span class="hl-0">, (req, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-3">Song</span><span class="hl-0">.</span><span class="hl-4">findByIdAndDelete</span><span class="hl-0">(</span><span class="hl-3">req</span><span class="hl-0">.</span><span class="hl-3">params</span><span class="hl-0">.</span><span class="hl-3">id</span><span class="hl-0">).</span><span class="hl-4">then</span><span class="hl-0">((song) =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-2">if</span><span class="hl-0"> (!song) {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">404</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">    } </span><span class="hl-2">else</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">send</span><span class="hl-0">(song);</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  }).</span><span class="hl-4">catch</span><span class="hl-0">(() =&gt; {</span><br/><span class="hl-0">    </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">400</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">});</span>
</code></pre>
<p>La unica diferencia que se presenta entre la funcion de busqueda por id, y la funcion de busqueda por el titulo, es el uso de la funcion <code>findByIdAndDelete</code>.</p>

<a href="#funcion-por-defecto" id="funcion-por-defecto" style="color: inherit; text-decoration: none;">
  <h3>Funcion por defecto</h3>
</a>
<p>Esta funcion se encarga de tratar las respuestas de aquellas opciones que no han sido implementadas. En este caso, en caso de que no se seleccione una opcion existente, se envia un estado 501.</p>
<pre><code class="language-c"><br/><span class="hl-0">export </span><span class="hl-1">const</span><span class="hl-0"> defaultRouter = express.</span><span class="hl-4">Router</span><span class="hl-0">();</span><br/><br/><br/><span class="hl-0">defaultRouter.</span><span class="hl-4">all</span><span class="hl-0">(</span><span class="hl-5">&#39;*&#39;</span><span class="hl-0">, (_, res) =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-3">res</span><span class="hl-0">.</span><span class="hl-4">status</span><span class="hl-0">(</span><span class="hl-6">501</span><span class="hl-0">).</span><span class="hl-4">send</span><span class="hl-0">();</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#aplicacion" id="aplicacion" style="color: inherit; text-decoration: none;">
  <h2>Aplicacion</h2>
</a>
<p>El contenido principal de la aplicacion se encuentra en el archivo <code>index.ts</code>: </p>
<pre><code class="language-c"><span class="hl-1">const</span><span class="hl-0"> app = </span><span class="hl-4">express</span><span class="hl-0">();</span><br/><br/><span class="hl-0">app.</span><span class="hl-4">use</span><span class="hl-0">(express.</span><span class="hl-4">json</span><span class="hl-0">());</span><br/><span class="hl-0">app.</span><span class="hl-4">use</span><span class="hl-0">(postRouter);</span><br/><span class="hl-0">app.</span><span class="hl-4">use</span><span class="hl-0">(getRouter);</span><br/><span class="hl-0">app.</span><span class="hl-4">use</span><span class="hl-0">(patchRouter);</span><br/><span class="hl-0">app.</span><span class="hl-4">use</span><span class="hl-0">(deleteRouter);</span><br/><span class="hl-0">app.</span><span class="hl-4">use</span><span class="hl-0">(defaultRouter);</span><br/><br/><span class="hl-1">const</span><span class="hl-0"> port = process.env.PORT || </span><span class="hl-6">3000</span><span class="hl-0"> ;</span><br/><br/><span class="hl-0">app.</span><span class="hl-4">listen</span><span class="hl-0">(port, () =&gt; {</span><br/><span class="hl-0">  </span><span class="hl-3">console</span><span class="hl-0">.</span><span class="hl-4">log</span><span class="hl-0">(`Server is up on port ${port}`);</span><br/><span class="hl-0">});</span>
</code></pre>
<p>En este archivo <code>index.ts</code> se encuentran importados todos los routers que se han definido previamente. Además, se puede observar que cada uno de esos routers se encuentran registrados en nuestra aplicacion, mediante el metodo <code>app.use()</code>. De esta manera, se logra obtener un codigo legible y modular, que cumple con las especificaciones y requerimientos necesarios. </p>
<p>Al puerto que hemos definido, se le asignará el valor de la variable de entorno <code>process.env.PORT</code>, pero en caso de que no se encuentre definida, se le asignará el puerto por defecto 3000.</p>

<a href="#ejecución-de-la-api" id="ejecución-de-la-api" style="color: inherit; text-decoration: none;">
  <h2>Ejecución de la API</h2>
</a>
<p>La API ha sido desplegada en Heroku y usa una base de datos MongoDB Atlas. 
La URL de la API es: <strong><a href="https://projecto-dsi.herokuapp.com">https://projecto-dsi.herokuapp.com</a></strong>.</p>
<p>Para probar el correcto funcionamiento de la API hemos desarrollado una serie de pruebas para cada uno de los tres ítems: canciones, artistas y playlists.</p>
<ol>
<li>Se comprueba que al crear un item en la base de datos, este se crea correctamente y devuelve un estado 201</li>
<li>Se comprueba que al crear un item sin pasarle el nombre o título, devuelve un estado de error 400</li>
<li>Se comprueba que al leer un ítem, se devuelve el ítem correctamente y un estado 200</li>
<li>Se comprueba que se pueden leer los ítems por id correctamente y se devuelve un estado 200</li>
<li>Se comprueba que al introducir un id que no existe en la base de datos se devuelve un error 500</li>
<li>Se comprueba que se devuelven todos los items si no se indica un nombre con un error 200</li>
<li>Se comprueba que al leer un nombre que no existe devuelve un error 404</li>
<li>Se compruba que se pueden modificar los atributos de un ítem y devuelve un estado 200</li>
<li>Se comprueba que se pueden modificar los atributos de un ítem por id y devuelve un estado 200</li>
<li>Se comprueba que al modificar por un id que no existe devuelve un error 500</li>
<li>Se comprueba que no se permiten modificaciones a atributos no válido y se devuelve un error 400</li>
<li>Se comprueba que si el nombre no existe al modificar se devuelve un error 404</li>
<li>Se comprueba que se puede eliminar un ítem de la base de datos y se devuelve un estado 200</li>
<li>Se comprueba que al borrar un ítem que no existe se devuelve un error</li>
</ol>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/models_artist.html">models/artist</a></li><li class=" tsd-kind-module"><a href="modules/models_playlist.html">models/playlist</a></li><li class=" tsd-kind-module"><a href="modules/models_song.html">models/song</a></li><li class=" tsd-kind-module"><a href="modules/routers_default.html">routers/default</a></li><li class=" tsd-kind-module"><a href="modules/routers_delete.html">routers/delete</a></li><li class=" tsd-kind-module"><a href="modules/routers_patch.html">routers/patch</a></li><li class=" tsd-kind-module"><a href="modules/routers_post.html">routers/post</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>